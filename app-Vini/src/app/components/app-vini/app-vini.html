<h1>
    Lista vagas
</h1>

<p>
    Contador: {{ contador() }}
    <button type="button" (click)="add()">
        Adicionar
    </button>
</p>

<div>
    <button type="button" routerLink="./form-vagas" (click)="limparStorage()">Criar Vaga</button>
</div>
<div>
    <table>
        <thead>
            <tr>
                <th>T√≠tulo</th>
                <th>Motivo</th>
                <th>Requisitos</th>
                <th>Quantidade</th>
                <th>Situa√ß√£o</th>
                <th>Gestor</th>
                <th>Data</th>
                <th colspan="5">Op√ß√µes</th>
            </tr>
        </thead>
        <tbody>
            @for(pedido of pedidosVagas();track $index){
            <tr>
                <td>{{pedido.titulo}}</td>
                <td>{{pedido.motivo}}</td>
                <td>
                    <ul>
                        @for(requisito of pedido.requisitos; track $index){
                        <li>{{requisito}}</li>
                        }
                    </ul>
                </td>
                <td>{{pedido.quantidade}}</td>
                <td [class]="voltaClasseStatus(pedido.aprovacao)">{{pedido.aprovacao}}</td>
                <td>
                    @for(gestor of gestorModelo(); track $index){
                    @if(pedido.gestorId == gestor.id){
                    <p>{{gestor.nome}}</p>
                    }
                    }
                </td>
                <td>{{converteData(pedido.dataSolicitacao)}}</td>
                
                <!-- Bot√£o Editar -->
                <td>
                    <button type="button" 
                            (click)="salvarComponente(pedido.id)" 
                            routerLink='./form-vagas'
                            class="btn-editar">
                        ‚úèÔ∏è Editar
                    </button>
                </td>
                
                <!-- Bot√µes de Status -->
                <td>
                    <button type="button" 
                            (click)="aprovarVaga(pedido.id)"
                            [disabled]="pedido.aprovacao === 'Aprovado'"
                            class="btn-aprovar">
                        ‚úÖ Aprovar
                    </button>
                </td>
                <td>
                    <button type="button" 
                            (click)="reprovarVaga(pedido.id)"
                            [disabled]="pedido.aprovacao === 'Reprovado'"
                            class="btn-reprovar">
                        ‚ùå Reprovar
                    </button>
                </td>

                <!-- Bot√£o Reabrir (opcional) -->
                <td>
                    <button type="button" 
                            (click)="reabrirVaga(pedido.id)"
                            [disabled]="pedido.aprovacao === 'Pendente'"
                            class="btn-reabrir">
                        üîÑ Reabrir
                    </button>
                </td>
                
                <!-- Bot√£o Deletar -->
                <td>
                    <button type="button" 
                            (click)="deletarVaga(pedido.id)"
                            class="btn-deletar">
                        üóëÔ∏è Deletar
                    </button>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>