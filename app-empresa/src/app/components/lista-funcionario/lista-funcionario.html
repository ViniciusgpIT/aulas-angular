<div class="container">
  <div class="header">
    <h1>Funcion√°rios</h1>
    <button class="btn-primary" (click)="novoFuncionario()">
      + Novo Funcion√°rio
    </button>
  </div>

  <nav class="nav-tabs">
    <a routerLink="/departamentos" class="nav-tab">Departamentos</a>
    <a routerLink="/funcionarios" class="nav-tab active">Funcion√°rios</a>
  </nav>

  <!-- Filtros -->
  <div class="filtros">
    <label for="filtroDepartamento">Filtrar por Departamento:</label>
    <select 
      id="filtroDepartamento" 
      [value]="filtroDepartamento()"
      (change)="onFiltroChange($event)">
      <option value="">Todos os departamentos</option>
      @for (departamento of departamentos(); track departamento.id) {
        <option [value]="departamento.id">{{ departamento.nome }}</option>
      }
    </select>
    
    @if (filtroDepartamento()) {
      <button class="btn-secondary" (click)="limparFiltro()">
        Limpar Filtro
      </button>
    }
  </div>

  @if (carregando()) {
    <div class="loading">Carregando funcion√°rios...</div>
  } @else {
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>Cargo</th>
            <th>Sal√°rio</th>
            <th>Departamento</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          @for (funcionario of funcionariosFiltrados(); track funcionario.id) {
            <tr>
              <td>{{ funcionario.nome }}</td>
              <td>{{ funcionario.cargo }}</td>
              <td>{{ formatarSalario(funcionario.salario) }}</td>
              <td>{{ getNomeDepartamento(funcionario.departamentoId) }}</td>
              <td class="acoes">
                <button 
                  class="btn-editar" 
                  (click)="editarFuncionario(funcionario.id)">
                  ‚úèÔ∏è Editar
                </button>
                <button 
                  class="btn-excluir" 
                  (click)="deletarFuncionario(funcionario.id)">
                  üóëÔ∏è Excluir
                </button>
              </td>
            </tr>
          }
          @if (funcionariosFiltrados().length === 0) {
            <tr>
              <td colspan="5" class="sem-registros">
                Nenhum funcion√°rio encontrado
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>